<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bonança Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Bonança Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="bonança-cli"><a class="header" href="#bonança-cli">Bonança CLI</a></h1>
<p>Bonança (pronounced boh-nahn-sah) is a Portuguese word used to describe a period of prosperity and tranquility, that typically comes after a period of instability or hardship. In the context of this project, Bonança represents a tool that aims to bring financial stability and growth to cryptocurrency investors.</p>
<p>A big insipration for the name comes from a verse in a famous Brazilian funk song "Rap da Felicidade" by Cidinho and Doca:</p>
<blockquote>
<p>"Sofri na tempestade, agora eu quero a bonança"</p>
</blockquote>
<p>Which translates to "I suffered in the storm, now I want prosperity". I hope this CLI can help users find their own "bonança" in the volatile world of cryptocurrency investing.</p>
<p>Bonança is a command-line interface (CLI) tool designed to help users manage index funds on various blockchain platforms. It provides functionalities for creating wallets, managing index funds, executing trades, and more.</p>
<p>Bonança is fully free and completely open source. You can find the source code on <a href="">GitHub</a>. The crypto is your own, and you are in full control of your funds at all times.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li>Create and manage wallets using secure key vaults.</li>
<li>Define and manage index funds with customizable asset allocations.</li>
<li>Connect to multiple blockchains (e.g., Solana, EVM-compatible chains).</li>
<li>Integrate with various exchanges and oracles for trading and price data.</li>
<li>Execute trades to rebalance index funds according to target allocations.</li>
</ul>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>To get started with Bonança, follow the instructions in the <a href="./install.html">Installation</a> guide. Once installed, you can create a wallet by following the steps in the <a href="./create.html">Create Account</a> section. After setting up your wallet, you can manage your index fund using the instructions provided in the <a href="./manage_index.html">Manage Index Fund</a> documentation.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<pre><code class="language-bash">cargo install bonanca
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wallet-creation"><a class="header" href="#wallet-creation">Wallet creation</a></h1>
<p>Bonança requires a wallet to manage your index fund. You can create a new wallet using the following command:</p>
<pre><code class="language-bash">bonanca create -f path/to/keyvault.json
</code></pre>
<p>This command will generate a new wallet and store the necessary keys in the specified key vault file. During the creation process, you will be prompted to set a password for the key vault to ensure its security. This
password will be required whenever you access the wallet in the future.</p>
<p>Bonança creates a master key for an HD (Hierarchical Deterministic) wallet, which can generate multiple child keys for different blockchains. This means you can manage multiple wallets for multiple blockchains (e.g., Solana, EVM-compatible chains) using a single key vault file.</p>
<p>Bonança encrypts the key vault file using the password you provide, so even if someone gains access to the file, they will not be able to use it without the password. Although the encryption methods are strong and secure, brute force attacks are still possible if a weak password is chosen. Therefore, it is crucial to select a strong and unique password for your key vault.</p>
<p>An example key vault file structure is as follows:</p>
<pre><code class="language-json">{
  "vault": {
    "cipher": "aes256-gcm",
    "cipher_params": { "nonce": "287189f34a1433d2de201d08" },
    "cipher_text": "7a34170003c0a7b3ccb75bac28757801a7d9b5e1ff062afa4af5f3c03e7d8982eb1f36ccce87436e42b44ffea6bcf39eba8c15d4e79ee0bf012811fca81ae1e112c0f8ae5d8e43ac8cad1ae961b11207",
    "kdf": "pbkdf2",
    "kdf_params": {
      "key_length": 32,
      "n": 600000,
      "salt": "M6lWvNAGuZBSp9fBGAUEqw"
    },
    "mac": "$argon2id$v=19$m=19456,t=2,p=1$M6lWvNAGuZBSp9fBGAUEqw$/U5VYPmg3+BQj0ttOyPnOUjH7bP23V9/tgvBpovna/8",
    "salt": "M6lWvNAGuZBSp9fBGAUEqw"
  },
  "chain_keys": [
    {
      "chain": "Solana",
      "public_keys": ["AbwHhAquPXvDfxvWEh1b4mG969DQF9wJQSK5k8XKSKtG"]
    },
    {
      "chain": "EVM",
      "public_keys": ["0x50940F0C5779BE15F7ACB12E9b75128e1415BFec"]
    }
  ]
}
</code></pre>
<p>This shows that the master key is encrypted using AES-256-GCM and the key derivation function used is PBKDF2 with 600,000 iterations. Your password is not stored in the file, only a hash of it (the <code>mac</code> field) is stored for verification purposes. The hashing algorithm used is Argon2id, which is a secure password hashing algorithm. The <code>salt</code> fields are random values used to enhance security during encryption and hashing, similarly the <code>nonce</code> field is a random value used during encryption. Changes to any of these fields will result in failure to decrypt the wallet.</p>
<p>After creating the wallet, you can use it to manage your index fund, including depositing assets, withdrawing funds, and executing trades.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="manage-index-fund"><a class="header" href="#manage-index-fund">Manage Index Fund</a></h1>
<p>To manage an index fund using Bonança, you will need to make a <code>json</code> file
that describes the index fund configuration. An example configuration file is as follows:</p>
<pre><code class="language-json">{
  "name": "Basic Index Fund",
  "chain": "Solana",
  "child": 0,
  "keyvault": "path/to/keyvault.json",
  "rpc_url": "https://api.mainnet-beta.solana.com",
  "max_offset": 0.01,
  "gas_address": "So11111111111111111111111111111111111111112",

  "aggregator": {
    "name": "Jupiter",
    "api_url": "https://lite-api.jup.ag",
    "api_key": "N/A"
  },

  "oracle": {
    "name": "Jupiter",
    "api_url": "https://lite-api.jup.ag",
    "api_key": "N/A"
  },

  "sectors": [
    {
      "name": "Layer 1",
      "weight": 0.5,
      "assets": [
        {
          "name": "Bitcoin",
          "symbol": "BTC",
          "address": "3NZ9JMVBmGAqocybic2c7LQCJScmgsAZ6vQqTDzcqmJh"
        },
        {
          "name": "Ethereum",
          "symbol": "ETH",
          "address": "7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"
        }
      ]
    },
    {
      "name": "DEX",
      "weight": 0.5,
      "assets": [
        {
          "name": "Raydium",
          "symbol": "RAY",
          "address": "4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"
        },
        {
          "name": "Jupiter",
          "symbol": "JUP",
          "address": "JUPyiwrYJFskUPiHa7hkeR8VUtAeFoSYbKedZNsDvCN"
        }
      ]
    }
  ]
}
</code></pre>
<p>Lets break down the fields in this configuration file:</p>
<ul>
<li><code>name</code>: The name of the index fund.</li>
<li><code>chain</code>: The blockchain where the index fund operates (e.g., "Solana").</li>
<li><code>child</code>: The child index for hierarchical deterministic wallets.</li>
<li><code>keyvault</code>: The path to the key vault file that contains the wallet keys.</li>
<li><code>rpc_url</code>: The RPC URL for connecting to the blockchain network.</li>
<li><code>max_offset</code>: The maximum allowable offset from the target asset allocation.</li>
<li><code>gas_address</code>: The address of the native token used for transaction fees.</li>
<li><code>aggregator</code>: Configuration for the exchange aggregator used for trading assets.
<ul>
<li><code>name</code>: The name of the aggregator (e.g., "Jupiter").</li>
<li><code>api_url</code>: The API URL for the aggregator.</li>
<li><code>api_key</code>: The API key for accessing the aggregator (if required).</li>
</ul>
</li>
<li><code>oracle</code>: Configuration for the price oracle used to fetch asset prices.
<ul>
<li><code>name</code>: The name of the oracle (e.g., "Jupiter").</li>
<li><code>api_url</code>: The API URL for the oracle.</li>
<li><code>api_key</code>: The API key for accessing the oracle (if required).</li>
</ul>
</li>
<li><code>sectors</code>: An array of sectors that group assets together. Each sector has the following fields:
<ul>
<li><code>name</code>: The name of the sector (e.g., "Layer 1").</li>
<li><code>weight</code>: The target weight of the sector in the index fund (e.g., 0.5 for 50%).</li>
<li><code>assets</code>: An array of assets within the sector. Each asset has the following fields:
<ul>
<li><code>name</code>: The name of the asset (e.g., "Bitcoin").</li>
<li><code>symbol</code>: The symbol of the asset (e.g., "BTC").</li>
<li><code>address</code>: The blockchain address of the asset.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Once you have created the configuration file, you can use Bonança to manage your index fund by executing commands such as balancing the fund, depositing assets, and withdrawing funds. Make sure to provide the path to your configuration file when running these commands.</p>
<pre><code class="language-bash">bonanca balance -i path/to/index_fund_config.json
</code></pre>
<p>This command will print the balance of the index fund and the allocations of each asset. The allocations are shown as <code>actual / target</code>, where <code>actual</code> is the current allocation and <code>target</code> is the desired allocation based on the weights defined in the configuration file.</p>
<pre><code class="language-bash">bonanca rebalance -i path/to/index_fund_config.json
</code></pre>
<p>This command will rebalance the index fund by buying and selling assets to match the target allocations defined in the configuration file. To see what trades would be executed without actually performing them, you can use the <code>--preview</code> flag (also <code>-p</code> for short):</p>
<pre><code class="language-bash">bonanca rebalance -i path/to/index_fund_config.json --preview
</code></pre>
<p>This command will show the proposed trades needed to rebalance the index fund without executing them.</p>
<pre><code class="language-bash">bonanca close -i path/to/index_fund_config.json -s RECEIVER_ADDRESS
</code></pre>
<p>This command will close the index fund by transfering all assets and to the specified receiver address. Make sure to replace <code>RECEIVER_ADDRESS</code> with the actual address where you want to send the assets.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing-to-bonança"><a class="header" href="#contributing-to-bonança">Contributing to Bonança</a></h1>
<p>I welcome contributions from the community to help improve Bonança! Whether it's fixing bugs, adding new features, or improving documentation, your contributions are valuable to me. Here are some guidelines to help you get started:</p>
<h2 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h2>
<ol>
<li><strong>Fork the Repository</strong>: Start by forking the Bonança repository on GitHub to create your own copy of the project.</li>
<li><strong>Create a Branch</strong>: Create a new branch for your feature or bug fix. Use a descriptive name for your branch, such as <code>feature/add-new-bot</code> or <code>bugfix/fix-index-calculation</code>.</li>
<li><strong>Make Changes</strong>: Make your changes in the new branch. Ensure that your code follows the existing coding style and conventions used in the project.</li>
<li><strong>Test Your Changes</strong>: Write tests for your changes to ensure they work as expected and do not introduce new issues. Run existing tests to verify that everything is still functioning correctly.</li>
<li><strong>Commit Your Changes</strong>: Commit your changes with clear and concise commit messages that describe the purpose of the changes.</li>
<li><strong>Push to Your Fork</strong>: Push your changes to your forked repository on GitHub.</li>
<li><strong>Create a Pull Request</strong>: Open a pull request from your branch to the main Bonança repository. Provide a detailed description of the changes you made and any relevant information for reviewers.</li>
</ol>
<h2 id="reporting-issues"><a class="header" href="#reporting-issues">Reporting Issues</a></h2>
<p>If you encounter any bugs or have suggestions for new features, please open an issue on the <a href="https://github.com/Cavenfish/bonanca/issues">GitHub Issues</a> page. Provide as much detail as possible to help us understand and address the issue.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="support-bonança"><a class="header" href="#support-bonança">Support Bonança</a></h1>
<p>If you find Bonança useful and would like to support its development, there are several ways you can contribute:</p>
<ol>
<li><strong>Star the Repository</strong>: Show your appreciation by starring the <a href="https://github.com/Cavenfish/bonanca">Bonança GitHub repository</a>. This helps increase the visibility of the project and encourages others to check it out.</li>
<li><strong>Report Issues</strong>: If you encounter any bugs or have suggestions for new features, please open an issue on the <a href="">GitHub Issues</a> page. Providing detailed information helps me address problems more effectively.</li>
<li><strong>Contribute Code</strong>: If you're a developer, consider contributing code to the project. You can fork the repository, make improvements or add new features, and submit a pull request.</li>
<li><strong>Spread the Word</strong>: Share Bonança with your friends, colleagues, and on social media. The more people who know about it, the more support and contributions the project can receive.</li>
<li><strong>Financial Support</strong>: If you'd like to provide financial support, consider donating by sending cryptocurrency to the following address:</li>
</ol>
<ul>
<li>BTC: <code>SOME_BTC_ADDRESS</code></li>
<li>LTC: <code>SOME_LTC_ADDRESS</code></li>
<li>ZEC: <code>SOME_ZEC_ADDRESS</code></li>
</ul>
<p>Your support helps cover development costs and motivates me to continue improving Bonança. Thank you for being a part of the Bonança community!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reporting-security-issues"><a class="header" href="#reporting-security-issues">Reporting Security Issues</a></h1>
<p>If you discover a security vulnerability in Bonança, please report it to me privately so that we can address the issue before it becomes public knowledge. This helps protect all users of Bonança and ensures that vulnerabilities are fixed promptly.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
